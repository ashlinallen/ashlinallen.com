<!DOCTYPE html>
<html>
<head>
	<style>
		body {
			background: #060b14;
			overflow: hidden;
		}

		#container {
			opacity: 0.75;
		}

		.star {
			position: fixed;
			width: 4px;
			height: 4px;
			background-color: #fff;
		}
	</style>
</head>
<body>
	<div id="container"></div>
	<script src="js/vendor/jquery-1.11.1.min.js"></script>
	<script src="js/vendor/TweenMax.min.js"></script>
	<script src="js/vendor/jquery.gsap.min.js"></script>

	<script src="js/vendor/jquery.velocity.min.js" id="library"></script>
	
	<script>
	var isWebkit = /Webkit/i.test(navigator.userAgent),
		isChrome = /Chrome/i.test(navigator.userAgent),
		isMobile = !!("ontouchstart" in window),
		isAndroid = /Android/i.test(navigator.userAgent),
		isIE = document.documentMode,
		screenWidth = window.innerWidth,
		screenHeight = window.innerHeight,
		chromeHeight = screenHeight - (document.documentElement.clientHeight || screenHeight),
		$stars,
		$container = $("#container"),
		enableStarMovement = true;

	function r (min, max) {
	    return Math.floor(Math.random() * (max - min + 1)) + min;
	}
	
	function randomFloatBetween(minValue,maxValue){
		return parseFloat(Math.min(minValue + (Math.random() * (maxValue - minValue)),maxValue).toFixed(2));
	}
	
    function mouseCoords(ev) {
        if (ev.pageX || ev.pageY) {
            return { x: ev.pageX, y: ev.pageY };
        }
        return {
            x: ev.clientX + document.body.scrollLeft - document.body.clientLeft,
            y: ev.clientY + document.body.scrollTop - document.body.clientTop
        };
    }    
	
	function initializeStars() {
		var starsCount = isMobile ? (isAndroid ? 20 : 40) : (isChrome ? 100 : 70),
			starsHtml = "";

		for (var i = 0; i < starsCount; i++) {
			starsHtml += "<div class='star' />";
		}
		
		$stars = $(starsHtml);
	
		if (isWebkit) {
			$stars.css("boxShadow", "0px 0px 6px 1px #FF0000");
		}
		
		for (i = 0; i < $stars.length; i++) {
			var op = randomFloatBetween(0.0, 1.0),
			x = r(-100, (screenWidth + 100)),
			y = r(-100, (screenHeight + 100)),
			s = randomFloatBetween(0.1, 1.0),
			el = $stars[i]
			red = r(0,255),
			grn = r(0,255),
			blu = r(0,255),
			rgb = "rgb(" + red + "," + grn + "," + blu + ")"
			bs = "0px 0px 6px 1px rgb(" + red + "," + grn + "," + blu + ")";
			
			TweenLite.to($stars[i], 0, {
				css:{
					x:x, 
					y:y, 
					z:1, 
					scale:s, 
					opacity: op, 
					backgroundColor: rgb, 
					boxShadow: bs
				}, onComplete:twinkle(el)
			});
		}
		
		$stars.appendTo($container);
	}
	
	function twinkle(el) {
		var op = randomFloatBetween(0.0, 1.0),
		adur = randomFloatBetween(0.2,2.0),
		tdur = r(500, 1000),
		red = r(0,255),
		grn = r(0,255),
		blu = r(0,255),
		rgb = "rgb(" + red + "," + grn + "," + blu + ")",
		bs = "0px 0px 6px 1px rgb(" + red + "," + grn + "," + blu + ")";
		
		setTimeout(function() {
			TweenLite.to($(el), adur, {
				css:{
					opacity: op,
					backgroundColor: rgb,
					boxShadow: bs
				}, onComplete:twinkle($(el))});
		}, tdur);
	};
		
    $(document).on("mousemove", $container, 
        function (e) {
			if (enableStarMovement) {
				enableStarMovement = false;
				
				var mousePos = mouseCoords(e);
				var bgPosX = (50 * (mousePos.x / $(window).width()));
				var bgPosY = (50 * (mousePos.y / $(window).height()));
				
				$stars
					.animate(
						{ 
							top:bgPosY,
							left:bgPosX
						}, 
						{
							duration: 30, 
							queue: false, 
							complete: 
								function() { 
									enableStarMovement = true; 
									twinkle($(this));
								} 
						}
					);
			}
        }
    );
	
	$(function() {
		initializeStars();
	});
	</script>
</body>
</html>